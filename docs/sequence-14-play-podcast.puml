@startuml
!theme plain
skinparam sequenceArrowThickness 2
skinparam roundcorner 20
skinparam maxmessagesize 60

title Play Podcast Sequence
participant Guest
participant PodcastAudioPlayer
participant useGlobalAudio
participant ProxyAudioAPI
participant Audio

Guest -> PodcastAudioPlayer: Click play on podcast
PodcastAudioPlayer -> useGlobalAudio: getAudioRef()
useGlobalAudio --> PodcastAudioPlayer: audio reference
PodcastAudioPlayer -> ProxyAudioAPI: GET /api/proxy-audio?key=audioUrl
ProxyAudioAPI -> ProxyAudioAPI: Generate signed URL
ProxyAudioAPI --> PodcastAudioPlayer: signed audio URL
PodcastAudioPlayer -> Audio: src = signed URL
PodcastAudioPlayer -> Audio: load()
PodcastAudioPlayer -> Audio: play()
Audio --> PodcastAudioPlayer: playing event
PodcastAudioPlayer -> PodcastAudioPlayer: setIsPlaying(true)
PodcastAudioPlayer -> PodcastAudioPlayer: setShowPlayer(true)
PodcastAudioPlayer --> Guest: Podcast playing with controls

@enduml
